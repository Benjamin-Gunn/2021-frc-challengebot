single_state:

  # ------ Drivetrain ------

  st_drivetrain_zero:
    behavior: bh_drivetrain_zero
    behavior_config:
      timeout_time: 1000
      zeroing_threshold: 0.1

  st_drivetrain_swerve:
    behavior: bh_drivetrain_swerve

  st_drivetrain_swerve_math:
    behavior: bh_drivetrain_swerve_math

  st_drivetrain_pure_pursuit_test:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_test
      heading_mode: limelight
      target_heading: 0.0

  st_drivetrain_swerve_align:
    behavior: bh_drivetrain_swerve
    behavior_config:
      target_heading: 0.0
      target_limelight: true



  st_drivetrain_anc_barrel:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_anc_barrel
      heading: 0.0

  st_drivetrain_anc_slalom:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_anc_slalom
      heading: 0.0

  st_drivetrain_anc_bounce:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_anc_bounce
      heading: 0.0

  st_drivetrain_gscr_a_blue:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gscr_a_blue
      heading: 0.0

  st_drivetrain_gscr_a_red:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gscr_a_red
      heading: 0.0

  st_drivetrain_gscr_b_blue:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gscr_b_blue
      heading: 0.0

  st_drivetrain_gscr_b_red:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gscr_b_red
      heading: 0.0

  st_drivetrain_gsc_a_blue:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gsc_a_blue
      heading: 0.0

  st_drivetrain_gsc_a_red:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gsc_a_red
      heading: 0.0

  st_drivetrain_gsc_b_blue:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gsc_b_blue
      heading: 0.0

  st_drivetrain_gsc_b_red:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_gsc_b_red
      heading: 0.0

  st_drivetrain_acc_green_intro:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_green_intro

  st_drivetrain_acc_intro_yellow:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_intro_yellow
      heading_mode: limelight

  st_drivetrain_acc_yellow_intro:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_yellow_intro

  st_drivetrain_acc_intro_blue:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_intro_blue
      heading_mode: limelight

  st_drivetrain_acc_blue_intro:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_blue_intro

  st_drivetrain_acc_intro_red:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_intro_red
      heading_mode: limelight

  st_drivetrain_acc_red_intro:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_acc_red_intro

  st_drivetrain_ppc_shooting_intro:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_ppc_shooting_intro

  st_drivetrain_ppc_intro_shooting:
    behavior: bh_drivetrain_swerve_pure_pursuit
    behavior_config:
      path_name: pt_ppc_intro_shooting
      heading_mode: limelight

  st_drivetrain_wait:
    behavior: bh_wait
    behavior_config:

  st_collector_collect:
    behavior: bh_collector
    behavior_config:
      speed: 0.5

  st_collector_eject:
    behavior: bh_collector
    behavior_config:
      speed: -0.5

  st_collector_stop:
    behavior: bh_collector
    behavior_config:
      speed: 0.0

  st_elevator_stop:
    behavior: bh_elevator
    behavior_config:
      speed: 0.0

  st_elevator_shoot:
    behavior: bh_elevator
    behavior_config:
      speed: 0.8

  st_elevator_eject:
    behavior: bh_elevator
    behavior_config:
      speed: -0.1

  st_flywheel_zero:
    behavior: bh_flywheel_zero
    behavior_config:
      zero_timeout_time: 500

  st_flywheel_prime:
    behavior: bh_flywheel_states
    behavior_config:
      velocity: 5000.0
      limelight: ipv_limelight_shooter
      allow_adjust: true
      velocity_profile: pr_prime
      final_velocity_error: 200.0
      percent_output: 0.9
      turbo_velocity_cutoff: 4500

  st_flywheel_shoot:
    behavior: bh_flywheel_states
    behavior_config:
      velocity: 5000.0
      allow_adjust: true
      velocity_profile: pr_shoot
      final_velocity_error: 500.0

  st_flywheel_stop:
    behavior: bh_flywheel_states
    behavior_config:
      coast: true
      allow_adjust: false

done_for_time_state:
#  wt_collector_collect:
#    state: st_collector_collect
#    state_timeout: 1000
#    max_timeout: 1000
#
#  wt_collector_eject:
#    state: st_collector_eject
#    state_timeout: 1000
#    max_timeout: 1000
#
#  wt_collector_stop:
#    state: st_collector_stop
#    state_timeout: 1000
#    max_timeout: 1000
#
#  wt_elevator_shoot:
#    state: st_elevator_shoot
#    state_timeout: 1000
#    max_timeout: 1000
#
#  wt_elevator_eject:
#    state: st_elevator_eject
#    state_timeout: 1000
#    max_timeout: 1000
#
#  wt_elevator_stop:
#    state: st_elevator_stop
#    state_timeout: 1000
#    max_timeout: 1000

  wt_shoot:
    state: pl_shoot
    state_timeout: 2000
    max_timeout: 2000

  wt_wait:
    state: st_drivetrain_wait
    state_timeout: 2000
    max_timeout: 2000

  wt_flywheel_prime_wait:
    state: st_flywheel_prime
    state_timeout: 10000
    max_timeout: 10000

parallel_state:
  pl_prime_to_shoot:
    foreground_states: [ st_elevator_stop, st_flywheel_prime ]
  pl_shoot:
    foreground_states: [ st_elevator_shoot, st_flywheel_shoot ]

  pl_ppc_prime_intro_shoot:
    foreground_states: [ st_drivetrain_ppc_intro_shooting ]
    background_statees: [ pl_prime_to_shoot ]

  pl_ppc_prime_shoot_intro:
    foreground_states: [ st_drivetrain_ppc_shooting_intro ]
    background_statees: [ pl_prime_to_shoot ]

sequencer_state:
  sq_pure_pursuit_test:
    sequence: [st_drivetrain_pure_pursuit_test]
  sq_auto_anc_anc_barrel:
    sequence: [st_drivetrain_anc_barrel]
  sq_auto_anc_anc_slalom:
    sequence: [st_drivetrain_anc_slalom]
  sq_auto_anc_anc_bounce:
    sequence: [st_drivetrain_anc_bounce]
  sq_auto_gscr_a_blue:
    sequence: [st_drivetrain_gscr_a_blue]
  sq_auto_gscr_a_red:
    sequence: [st_drivetrain_gscr_a_red]
  sq_auto_gscr_b_blue:
    sequence: [st_drivetrain_gscr_b_blue]
  sq_auto_gscr_b_red:
    sequence: [st_drivetrain_gscr_b_red]
  sq_auto_gsc_a_blue:
    sequence: [ st_drivetrain_gsc_a_blue ]
  sq_auto_gsc_a_red:
    sequence: [ st_drivetrain_gsc_a_red ]
  sq_auto_gsc_b_blue:
    sequence: [ st_drivetrain_gsc_b_blue ]
  sq_auto_gsc_b_red:
    sequence: [ st_drivetrain_gsc_b_red ]


#  sq_auto_collector_test_test:
#    sequence: [ wt_collector_collect, wt_collector_stop, wt_collector_eject, wt_collector_stop ]
#
#  sq_auto_elevator_test_test:
#    sequence: [ wt_elevator_shoot, wt_elevator_stop, wt_elevator_eject, wt_elevator_stop ]

  sq_auto_main:
    sequence: [pl_prime_to_shoot, wt_shoot, pl_prime_to_shoot, st_drivetrain_acc_green_intro, wt_wait, st_drivetrain_acc_intro_yellow, pl_prime_to_shoot, wt_shoot, pl_prime_to_shoot, st_drivetrain_acc_yellow_intro, wt_wait, st_drivetrain_acc_intro_blue, pl_prime_to_shoot, wt_shoot, pl_prime_to_shoot, st_drivetrain_acc_blue_intro, wt_wait, st_drivetrain_acc_intro_red, pl_prime_to_shoot, wt_shoot, pl_prime_to_shoot, st_drivetrain_acc_red_intro, wt_wait, st_drivetrain_acc_intro_yellow, pl_prime_to_shoot, wt_shoot, pl_prime_to_shoot ]
  sq_auto_acc_a_a:
    sequence: [sq_auto_main, st_elevator_stop, st_flywheel_stop]

  sq_ppc_main:
    sequence: [pl_ppc_prime_intro_shoot, wt_shoot, pl_ppc_prime_shoot_intro, wt_flywheel_prime_wait]

  sq_ppc_wait:
    sequence: [wt_flywheel_prime_wait]

